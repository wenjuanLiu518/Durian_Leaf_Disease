{"id":"d2814c63-dbf3-417b-8f65-610ad0577f65","revision":0,"last_node_id":127,"last_link_id":190,"nodes":[{"id":94,"type":"Joy_extra_options","pos":[-3468.046630859375,-1760.206787109375],"size":[1513.5999755859375,442.9769287109375],"flags":{},"order":0,"mode":0,"inputs":[{"label":"If there is a person/character in the image you must refer to them as {name}.","localized_name":"If there is a person/character in the image you must refer to them as {name}.","name":"If there is a person/character in the image you must refer to them as {name}.","type":"BOOLEAN","widget":{"name":"If there is a person/character in the image you must refer to them as {name}."},"link":null},{"label":"Do NOT include information about people/characters that cannot be changed (like ethnicity, gender, etc), but do still include changeable attributes (like hair style).","localized_name":"Do NOT include information about people/characters that cannot be changed (like ethnicity, gender, etc), but do still include changeable attributes (like hair style).","name":"Do NOT include information about people/characters that cannot be changed (like ethnicity, gender, etc), but do still include changeable attributes (like hair style).","type":"BOOLEAN","widget":{"name":"Do NOT include information about people/characters that cannot be changed (like ethnicity, gender, etc), but do still include changeable attributes (like hair style)."},"link":null},{"label":"Include information about lighting.","localized_name":"Include information about lighting.","name":"Include information about lighting.","type":"BOOLEAN","widget":{"name":"Include information about lighting."},"link":null},{"label":"Include information about camera angle.","localized_name":"Include information about camera angle.","name":"Include information about camera angle.","type":"BOOLEAN","widget":{"name":"Include information about camera angle."},"link":null},{"label":"Include information about whether there is a watermark or not.","localized_name":"Include information about whether there is a watermark or not.","name":"Include information about whether there is a watermark or not.","type":"BOOLEAN","widget":{"name":"Include information about whether there is a watermark or not."},"link":null},{"label":"Include information about whether there are JPEG artifacts or not.","localized_name":"Include information about whether there are JPEG artifacts or not.","name":"Include information about whether there are JPEG artifacts or not.","type":"BOOLEAN","widget":{"name":"Include information about whether there are JPEG artifacts or not."},"link":null},{"label":"If it is a photo you MUST include information about what camera was likely used and details such as aperture, shutter speed, ISO, etc.","localized_name":"If it is a photo you MUST include information about what camera was likely used and details such as aperture, shutter speed, ISO, etc.","name":"If it is a photo you MUST include information about what camera was likely used and details such as aperture, shutter speed, ISO, etc.","type":"BOOLEAN","widget":{"name":"If it is a photo you MUST include information about what camera was likely used and details such as aperture, shutter speed, ISO, etc."},"link":null},{"label":"Do NOT include anything sexual; keep it PG.","localized_name":"Do NOT include anything sexual; keep it PG.","name":"Do NOT include anything sexual; keep it PG.","type":"BOOLEAN","widget":{"name":"Do NOT include anything sexual; keep it PG."},"link":null},{"label":"Do NOT mention the image's resolution.","localized_name":"Do NOT mention the image's resolution.","name":"Do NOT mention the image's resolution.","type":"BOOLEAN","widget":{"name":"Do NOT mention the image's resolution."},"link":null},{"label":"You MUST include information about the subjective aesthetic quality of the image from low to very high.","localized_name":"You MUST include information about the subjective aesthetic quality of the image from low to very high.","name":"You MUST include information about the subjective aesthetic quality of the image from low to very high.","type":"BOOLEAN","widget":{"name":"You MUST include information about the subjective aesthetic quality of the image from low to very high."},"link":null},{"label":"Include information on the image's composition style, such as leading lines, rule of thirds, or symmetry.","localized_name":"Include information on the image's composition style, such as leading lines, rule of thirds, or symmetry.","name":"Include information on the image's composition style, such as leading lines, rule of thirds, or symmetry.","type":"BOOLEAN","widget":{"name":"Include information on the image's composition style, such as leading lines, rule of thirds, or symmetry."},"link":null},{"label":"Do NOT mention any text that is in the image.","localized_name":"Do NOT mention any text that is in the image.","name":"Do NOT mention any text that is in the image.","type":"BOOLEAN","widget":{"name":"Do NOT mention any text that is in the image."},"link":null},{"label":"Specify the depth of field and whether the background is in focus or blurred.","localized_name":"Specify the depth of field and whether the background is in focus or blurred.","name":"Specify the depth of field and whether the background is in focus or blurred.","type":"BOOLEAN","widget":{"name":"Specify the depth of field and whether the background is in focus or blurred."},"link":null},{"label":"If applicable, mention the likely use of artificial or natural lighting sources.","localized_name":"If applicable, mention the likely use of artificial or natural lighting sources.","name":"If applicable, mention the likely use of artificial or natural lighting sources.","type":"BOOLEAN","widget":{"name":"If applicable, mention the likely use of artificial or natural lighting sources."},"link":null},{"label":"Do NOT use any ambiguous language.","localized_name":"Do NOT use any ambiguous language.","name":"Do NOT use any ambiguous language.","type":"BOOLEAN","widget":{"name":"Do NOT use any ambiguous language."},"link":null},{"label":"Include whether the image is sfw, suggestive, or nsfw.","localized_name":"Include whether the image is sfw, suggestive, or nsfw.","name":"Include whether the image is sfw, suggestive, or nsfw.","type":"BOOLEAN","widget":{"name":"Include whether the image is sfw, suggestive, or nsfw."},"link":null},{"label":"ONLY describe the most important elements of the image.","localized_name":"ONLY describe the most important elements of the image.","name":"ONLY describe the most important elements of the image.","type":"BOOLEAN","widget":{"name":"ONLY describe the most important elements of the image."},"link":null}],"outputs":[{"label":"Extra_Options","localized_name":"Extra_Options","name":"Extra_Options","type":"Extra_Options","slot_index":0,"links":[148]}],"properties":{"cnr_id":"comfyui_slk_joy_caption_two","ver":"667751cab945bd8e9fb0be4d557d47e36821350a","Node name for S&R":"Joy_extra_options"},"widgets_values":[false,false,true,true,false,false,false,false,false,false,false,false,false,true,false,false,true]},{"id":78,"type":"MathExpression|pysssss","pos":[-4571.83642578125,-1821.13330078125],"size":[249.5552978515625,145.1951141357422],"flags":{},"order":6,"mode":0,"inputs":[{"label":"a","localized_name":"a","name":"a","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":119},{"label":"b","localized_name":"b","name":"b","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":135},{"label":"c","localized_name":"c","name":"c","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":null},{"localized_name":"expression","name":"expression","type":"INT,FLOAT,IMAGE,LATENT","widget":{"name":"expression"},"link":null}],"outputs":[{"label":"整数","localized_name":"整数","name":"INT","type":"INT","slot_index":0,"links":[127,136]},{"label":"浮点","localized_name":"浮点","name":"FLOAT","type":"FLOAT","links":null}],"properties":{"cnr_id":"comfyui-custom-scripts","ver":"bbda5e52ad580c13ceaa53136d9c2bed9137bd2e"},"widgets_values":["a % b"]},{"id":93,"type":"Joy_caption_two_advanced","pos":[-2993.46923828125,-2174.09912109375],"size":[315,246.54661560058594],"flags":{},"order":12,"mode":0,"inputs":[{"label":"joy_two_pipeline","localized_name":"joy_two_pipeline","name":"joy_two_pipeline","type":"JoyTwoPipeline","link":146},{"label":"image","localized_name":"image","name":"image","type":"IMAGE","link":185},{"label":"extra_options","localized_name":"extra_options","name":"extra_options","type":"Extra_Options","link":148},{"label":"caption_type","localized_name":"caption_type","name":"caption_type","type":"COMBO","widget":{"name":"caption_type"},"link":null},{"label":"caption_length","localized_name":"caption_length","name":"caption_length","type":"COMBO","widget":{"name":"caption_length"},"link":null},{"label":"name","localized_name":"name","name":"name","type":"STRING","widget":{"name":"name"},"link":null},{"label":"custom_prompt","localized_name":"custom_prompt","name":"custom_prompt","type":"STRING","widget":{"name":"custom_prompt"},"link":null},{"label":"low_vram","localized_name":"low_vram","name":"low_vram","type":"BOOLEAN","widget":{"name":"low_vram"},"link":null},{"label":"top_p","localized_name":"top_p","name":"top_p","type":"FLOAT","widget":{"name":"top_p"},"link":null},{"label":"temperature","localized_name":"temperature","name":"temperature","type":"FLOAT","widget":{"name":"temperature"},"link":null}],"outputs":[{"label":"STRING","localized_name":"字符串","name":"STRING","type":"STRING","slot_index":0,"links":[149,157]}],"properties":{"cnr_id":"comfyui_slk_joy_caption_two","ver":"667751cab945bd8e9fb0be4d557d47e36821350a","Node name for S&R":"Joy_caption_two_advanced"},"widgets_values":["Descriptive","long","","This is a durian leaf with no disease in durian orchard . Please describe the disease leaf in detail, focusing on the surface, shape and outline.",false,0.9,0.6]},{"id":52,"type":"ShowText|pysssss","pos":[-3462.54052734375,-2167.767822265625],"size":[439.59521484375,235.9649200439453],"flags":{},"order":13,"mode":0,"inputs":[{"label":"text","localized_name":"text","name":"text","type":"STRING","link":149}],"outputs":[{"label":"字符串","localized_name":"字符串","name":"STRING","shape":6,"type":"STRING","links":null}],"properties":{"cnr_id":"comfyui-custom-scripts","ver":"bbda5e52ad580c13ceaa53136d9c2bed9137bd2e","Node name for S&R":"ShowText|pysssss"},"widgets_values":["The image shows a healthy, single durian leaf hanging from a branch. The leaf is elongated, oval-shaped, and measures approximately 12 inches in length. Its surface is smooth and glossy, with a rich, vibrant green color that indicates good health. The leaf's edges are slightly serrated, and the central vein runs prominently down the middle, dividing the leaf into two symmetrical halves. The texture is sleek, almost waxy, reflecting light subtly. The background features a blurred mix of green hues, suggesting a lush, dense foliage typical of a durian orchard. The lighting is natural, indicating that the photo was taken outdoors during daylight. There are no visible signs of disease or damage on the leaf, highlighting its robust and healthy condition."]},{"id":91,"type":"SaveImageKJ","pos":[-4592.16796875,-1596.2974853515625],"size":[315,130],"flags":{},"order":14,"mode":0,"inputs":[{"label":"images","localized_name":"images","name":"images","type":"IMAGE","link":184},{"label":"caption","localized_name":"caption","name":"caption","shape":7,"type":"STRING","link":157},{"label":"filename_prefix","localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":141},{"label":"output_folder","localized_name":"output_folder","name":"output_folder","type":"STRING","widget":{"name":"output_folder"},"link":168},{"label":"caption_file_extension","localized_name":"caption_file_extension","name":"caption_file_extension","shape":7,"type":"STRING","widget":{"name":"caption_file_extension"},"link":null}],"outputs":[{"label":"filename","localized_name":"filename","name":"filename","type":"STRING","links":null}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"82272ef4486e035b62a3e70bb798a3042dd640e4","Node name for S&R":"SaveImageKJ"},"widgets_values":["ComfyUI","E:\\durian_leaf_disease\\lora_train\\Algal_Leaf_Spot_bg",".txt"]},{"id":103,"type":"StringConstant","pos":[-4998.6162109375,-2169.6484375],"size":[315,58],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"string","name":"string","type":"STRING","widget":{"name":"string"},"link":null}],"outputs":[{"localized_name":"字符串","name":"STRING","type":"STRING","slot_index":0,"links":[167]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"4d8cd3daa4aa8c411c4a4a6a2a97199bd46d1b4e","Node name for S&R":"StringConstant"},"widgets_values":["E:\\durian_leaf_disease\\lora_train_dataset\\No_Disease"]},{"id":51,"type":"Joy_caption_two_load","pos":[-3412.076171875,-1873.4776611328125],"size":[315,58],"flags":{},"order":2,"mode":0,"inputs":[{"label":"model","localized_name":"model","name":"model","type":"COMBO","widget":{"name":"model"},"link":null}],"outputs":[{"label":"JoyTwoPipeline","localized_name":"JoyTwoPipeline","name":"JoyTwoPipeline","type":"JoyTwoPipeline","slot_index":0,"links":[146]}],"properties":{"cnr_id":"comfyui_slk_joy_caption_two","ver":"667751cab945bd8e9fb0be4d557d47e36821350a","Node name for S&R":"Joy_caption_two_load"},"widgets_values":["unsloth/Meta-Llama-3.1-8B-Instruct-bnb-4bit"]},{"id":68,"type":"PreviewImage","pos":[-3932.714111328125,-1980.4776611328125],"size":[367.1109924316406,430.908447265625],"flags":{},"order":11,"mode":0,"inputs":[{"label":"图像","localized_name":"图像","name":"images","type":"IMAGE","link":183}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.18","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":89,"type":"CR Integer To String","pos":[-4205.39599609375,-1965.68798828125],"size":[210,54],"flags":{},"order":8,"mode":0,"inputs":[{"label":"int_","localized_name":"int_","name":"int_","type":"INT","link":136}],"outputs":[{"label":"字符串","localized_name":"字符串","name":"STRING","type":"STRING","slot_index":0,"links":[141]},{"label":"show_help","localized_name":"show_help","name":"show_help","type":"STRING","links":null}],"properties":{"cnr_id":"comfyroll","ver":"d78b780ae43fcf8c6b7c6505e6ffb4584281ceca","Node name for S&R":"CR Integer To String","aux_id":"Suzie1/ComfyUI_Comfyroll_CustomNodes"},"widgets_values":[]},{"id":104,"type":"StringConstant","pos":[-5001.42138671875,-1533.9803466796875],"size":[315,58],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"string","name":"string","type":"STRING","widget":{"name":"string"},"link":null}],"outputs":[{"localized_name":"字符串","name":"STRING","type":"STRING","slot_index":0,"links":[168]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"4d8cd3daa4aa8c411c4a4a6a2a97199bd46d1b4e","Node name for S&R":"StringConstant"},"widgets_values":["E:\\durian_leaf_disease\\lora_train\\No_Disease\\1_no disease"]},{"id":84,"type":"LoadImagesFromFolderKJ","pos":[-4612.13232421875,-2157.512451171875],"size":[351.72540283203125,279.19366455078125],"flags":{},"order":5,"mode":0,"inputs":[{"label":"文件夹","localized_name":"folder","name":"folder","type":"STRING","widget":{"name":"folder"},"link":167},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":null},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":null},{"localized_name":"keep_aspect_ratio","name":"keep_aspect_ratio","type":"COMBO","widget":{"name":"keep_aspect_ratio"},"link":null},{"localized_name":"image_load_cap","name":"image_load_cap","shape":7,"type":"INT","widget":{"name":"image_load_cap"},"link":null},{"localized_name":"start_index","name":"start_index","shape":7,"type":"INT","widget":{"name":"start_index"},"link":null},{"localized_name":"include_subfolders","name":"include_subfolders","shape":7,"type":"BOOLEAN","widget":{"name":"include_subfolders"},"link":null}],"outputs":[{"label":"图像","localized_name":"image","name":"image","type":"IMAGE","slot_index":0,"links":[133]},{"label":"遮罩","localized_name":"mask","name":"mask","type":"MASK","slot_index":1,"links":[134]},{"label":"数量","localized_name":"count","name":"count","type":"INT","slot_index":2,"links":[135]},{"label":"图像路径","localized_name":"image_path","name":"image_path","type":"STRING","links":[]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"82272ef4486e035b62a3e70bb798a3042dd640e4","Node name for S&R":"LoadImagesFromFolderKJ"},"widgets_values":["E:\\durian_leaf_disease\\lora_train_dataset\\Algal_Leaf_Spot_clean",640,640,"pad_as_mask",0,0,false]},{"id":81,"type":"GetImageRangeFromBatch","pos":[-4211.60888671875,-2157.26416015625],"size":[287.62677001953125,102],"flags":{},"order":7,"mode":0,"inputs":[{"label":"图像","localized_name":"images","name":"images","shape":7,"type":"IMAGE","link":133},{"label":"遮罩","localized_name":"masks","name":"masks","shape":7,"type":"MASK","link":134},{"label":"start_index","localized_name":"start_index","name":"start_index","type":"INT","widget":{"name":"start_index"},"link":127},{"localized_name":"num_frames","name":"num_frames","type":"INT","widget":{"name":"num_frames"},"link":null}],"outputs":[{"label":"图像","localized_name":"图像","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[180]},{"label":"遮罩","localized_name":"遮罩","name":"MASK","type":"MASK","links":[190]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"82272ef4486e035b62a3e70bb798a3042dd640e4","Node name for S&R":"GetImageRangeFromBatch"},"widgets_values":[0,1]},{"id":124,"type":"LayerUtility: CropByMask","pos":[-4232.25,-1796.7120361328125],"size":[270,238],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"图像","name":"image","type":"IMAGE","link":180},{"localized_name":"裁剪遮罩","name":"mask_for_crop","type":"MASK","link":187},{"localized_name":"反转遮罩","name":"invert_mask","type":"BOOLEAN","widget":{"name":"invert_mask"},"link":null},{"localized_name":"检测","name":"detect","type":"COMBO","widget":{"name":"detect"},"link":null},{"localized_name":"顶部保留","name":"top_reserve","type":"INT","widget":{"name":"top_reserve"},"link":null},{"localized_name":"底部保留","name":"bottom_reserve","type":"INT","widget":{"name":"bottom_reserve"},"link":null},{"localized_name":"左侧保留","name":"left_reserve","type":"INT","widget":{"name":"left_reserve"},"link":null},{"localized_name":"右侧保留","name":"right_reserve","type":"INT","widget":{"name":"right_reserve"},"link":null}],"outputs":[{"localized_name":"croped_image","name":"croped_image","type":"IMAGE","links":[183,184,185]},{"localized_name":"croped_mask","name":"croped_mask","type":"MASK","links":null},{"localized_name":"crop_box","name":"crop_box","type":"BOX","links":null},{"localized_name":"box_preview","name":"box_preview","type":"IMAGE","links":null}],"properties":{"cnr_id":"comfyui_layerstyle","ver":"c0fb64d0ebcb81c6c445a8af79ecee24bc3845b0","Node name for S&R":"LayerUtility: CropByMask"},"widgets_values":[true,"min_bounding_rect",0,0,0,0],"color":"rgba(38, 73, 116, 0.7)"},{"id":126,"type":"GrowMask","pos":[-3856.304443359375,-2158.726318359375],"size":[270,82],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"遮罩","name":"mask","type":"MASK","link":190},{"localized_name":"扩展","name":"expand","type":"INT","widget":{"name":"expand"},"link":null},{"localized_name":"倒角","name":"tapered_corners","type":"BOOLEAN","widget":{"name":"tapered_corners"},"link":null}],"outputs":[{"localized_name":"遮罩","name":"MASK","type":"MASK","links":[187]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.32","Node name for S&R":"GrowMask"},"widgets_values":[8,false]},{"id":77,"type":"CR Seed","pos":[-5010.63330078125,-1879.4822998046875],"size":[331.48480224609375,105.32835388183594],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null}],"outputs":[{"label":"随机种","localized_name":"seed","name":"seed","type":"INT","slot_index":0,"links":[119]},{"label":"show_help","localized_name":"show_help","name":"show_help","type":"STRING","links":null}],"properties":{"cnr_id":"comfyroll","ver":"d78b780ae43fcf8c6b7c6505e6ffb4584281ceca","Node name for S&R":"CR Seed","aux_id":"Suzie1/ComfyUI_Comfyroll_CustomNodes"},"widgets_values":[0,"increment"]}],"links":[[119,77,0,78,0,"INT,FLOAT,IMAGE,LATENT"],[127,78,0,81,2,"INT"],[133,84,0,81,0,"IMAGE"],[134,84,1,81,1,"MASK"],[135,84,2,78,1,"INT,FLOAT,IMAGE,LATENT"],[136,78,0,89,0,"INT"],[141,89,0,91,2,"STRING"],[146,51,0,93,0,"JoyTwoPipeline"],[148,94,0,93,2,"Extra_Options"],[149,93,0,52,0,"STRING"],[157,93,0,91,1,"STRING"],[167,103,0,84,0,"STRING"],[168,104,0,91,3,"STRING"],[180,81,0,124,0,"IMAGE"],[183,124,0,68,0,"IMAGE"],[184,124,0,91,0,"IMAGE"],[185,124,0,93,1,"IMAGE"],[187,126,0,124,1,"MASK"],[190,81,1,126,0,"MASK"]],"groups":[{"id":1,"title":"0、图片加载","bounding":[-4622.13232421875,-2234.2802734375,1066.529296875,777.982666015625],"color":"#3f789e","font_size":24,"flags":{}},{"id":3,"title":"1、数据打标（JoyCaption）","bounding":[-3478.046630859375,-2247.69921875,809.577392578125,940.4703369140625],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":1.2880787450348774,"offset":[5162.2143245596,2257.0714727535124]},"frontendVersion":"1.18.9","ue_links":[]},"version":0.4}